# دليل صفحة نموذج الحجز الجديدة

## الميزات الجديدة

### 1. صفحة نموذج الحجز (`BookingForm.tsx`)
- ✅ **خطوتين للحجز:** معلومات المريض ثم تأكيد الحجز
- ✅ **معلومات المريض:** الاسم، الهاتف، البريد الإلكتروني، ملاحظات
- ✅ **تأكيد الحجز:** مراجعة المعلومات وتأكيد الحجز
- ✅ **تصميم متجاوب:** يعمل على جميع الأحجام

### 2. التوجيه الجديد
- ✅ **Route جديد:** `/patient/booking/:centerId/:serviceId`
- ✅ **تحديث زر الحجز:** الآن يتوجه إلى صفحة الحجز التفصيلية
- ✅ **تنقل سلس:** بين صفحات التطبيق

## كيفية العمل

### الخطوة 1: معلومات المريض
1. **الاسم الكامل** (مطلوب)
2. **رقم الهاتف** (مطلوب)
3. **البريد الإلكتروني** (اختياري)
4. **ملاحظات إضافية** (اختياري)

### الخطوة 2: تأكيد الحجز
1. **مراجعة معلومات المريض**
2. **مراجعة تفاصيل الخدمة**
3. **تأكيد الحجز النهائي**

## الملفات المحدثة

### 1. `src/pages/patient/BookingForm.tsx` (جديد)
```typescript
// صفحة نموذج الحجز الجديدة
// تحتوي على خطوتين: معلومات المريض وتأكيد الحجز
// تصميم متجاوب ومتسق مع باقي التطبيق
```

### 2. `src/App.tsx` (محدث)
```typescript
// إضافة Route جديد:
<Route path="/patient/booking/:centerId/:serviceId" element={<BookingForm />} />
```

### 3. `src/pages/patient/CenterDetails.tsx` (محدث)
```typescript
// تحديث دالة handleBookService:
// الآن تتوجه إلى صفحة الحجز الجديدة بدلاً من الحجز المباشر
```

## التصميم

### الألوان والأنماط
- **Primary:** للعناصر المهمة
- **Accent:** لأزرار الحجز
- **Muted:** للنصوص الثانوية
- **Cards:** للعناصر المنظمة

### الأيقونات
- **Stethoscope:** للخدمات الطبية
- **User:** لمعلومات المريض
- **CheckCircle:** لتأكيد الحجز
- **ArrowLeft/ArrowRight:** للتنقل

### التخطيط
- **Mobile-first:** مصمم للهواتف أولاً
- **Responsive:** يتكيف مع جميع الأحجام
- **Centered:** النصوص في المنتصف على الهاتف

## الوظائف

### 1. التحقق من صحة البيانات
```typescript
// التحقق من الحقول المطلوبة
if (!formData.patientName || !formData.patientPhone) {
  // عرض رسالة خطأ
}
```

### 2. إنشاء الحجز
```typescript
// استخدام useBookings hook
await createBooking({
  medical_center_id: center.id,
  service_id: selectedService.id,
  patient_name: formData.patientName,
  patient_phone: formData.patientPhone,
  patient_email: formData.patientEmail,
  notes: formData.notes
});
```

### 3. التنقل
```typescript
// بعد الحجز الناجح
navigate(`/patient/queue-tracking/${center.id}`);
```

## اختبار الصفحة

### 1. الوصول للصفحة
1. اذهب إلى أي مركز طبي
2. اضغط "احجز دورك الآن" لأي خدمة
3. ستظهر صفحة نموذج الحجز

### 2. ملء المعلومات
1. أدخل الاسم الكامل
2. أدخل رقم الهاتف
3. أدخل البريد الإلكتروني (اختياري)
4. أضف ملاحظات (اختياري)
5. اضغط "التالي"

### 3. تأكيد الحجز
1. راجع معلومات المريض
2. راجع تفاصيل الخدمة
3. اضغط "تأكيد الحجز"

### 4. النتيجة
- ✅ رسالة نجاح
- ✅ توجيه لصفحة تتبع الطابور
- ✅ الحجز محفوظ في قاعدة البيانات

## الأخطاء المحتملة

### 1. معلومات ناقصة
```
"معلومات مطلوبة"
"يرجى ملء الاسم ورقم الهاتف"
```

### 2. خطأ في الحجز
```
"خطأ في الحجز"
"حدث خطأ أثناء تأكيد الحجز، يرجى المحاولة مرة أخرى"
```

### 3. خدمة غير موجودة
```
"الخدمة غير موجودة"
"الخدمة المطلوبة غير متاحة"
```

## التحسينات المستقبلية

### 1. إضافة المزيد من الحقول
- تاريخ الميلاد
- الجنس
- العنوان
- التأمين الصحي

### 2. تحسين تجربة المستخدم
- حفظ معلومات المريض
- تذكيرات الحجز
- إشعارات التطبيق

### 3. ميزات إضافية
- اختيار موعد محدد
- دفع إلكتروني
- تقييم الخدمة

## الدعم

إذا واجهت أي مشاكل:
1. **تحقق من Console** - ابحث عن أخطاء JavaScript
2. **تحقق من Network** - ابحث عن أخطاء HTTP
3. **تحقق من البيانات** - تأكد من صحة المعلومات المدخلة
4. **تحقق من الاتصال** - تأكد من اتصال الإنترنت
