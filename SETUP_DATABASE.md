# إعداد قاعدة البيانات - تطبيق "دورك"

## خطوات إعداد قاعدة البيانات

### 1. تشغيل Migration

```bash
# في مجلد المشروع
supabase db push
```

### 2. إضافة البيانات التجريبية

بعد تشغيل Migration، ستجد البيانات التجريبية التالية في قاعدة البيانات:

#### المراكز الطبية:
- **عيادة الدكتور محمد أحمد** (CLINIC001)
- **مستشفى النور التخصصي** (CLINIC002)  
- **عيادة القلب والأوعية الدموية** (CLINIC003)

#### الأطباء:
- **د. محمد أحمد** - استشاري طب الأسنان
- **د. فاطمة سالم** - أخصائية تقويم الأسنان
- **د. أحمد محمود** - طبيب عام
- **د. نورا حسن** - استشارية أمراض القلب

#### الخدمات:
- كشف وتشخيص (150 جنيه)
- تنظيف الأسنان (200 جنيه)
- حشو الأسنان (300 جنيه)
- استشارة تقويم (100 جنيه)
- كشف عام (120 جنيه)
- كشف قلب (250 جنيه)

### 3. اختبار الحجز

1. **سجل دخول كمريض** في التطبيق
2. **انتقل إلى صفحة المركز** (مثل `/patient/center/center-1`)
3. **اضغط على "احجز دورك الآن"** لأي خدمة
4. **تحقق من صفحة "حجوزاتي"** لرؤية الحجز الجديد

### 4. معرفات المراكز الطبية للاختبار

- **عيادة الدكتور محمد أحمد**: `center-1` أو UUID من قاعدة البيانات
- **مستشفى النور التخصصي**: `center-2` أو UUID من قاعدة البيانات
- **عيادة القلب والأوعية الدموية**: `center-3` أو UUID من قاعدة البيانات

### 5. استكشاف الأخطاء

إذا لم تظهر الحجوزات:

1. **تحقق من تسجيل الدخول** - يجب أن تكون مسجل دخول
2. **تحقق من قاعدة البيانات** - تأكد من وجود البيانات التجريبية
3. **تحقق من Console** - ابحث عن أي أخطاء في المتصفح
4. **تحقق من Supabase** - تأكد من أن RLS policies تعمل بشكل صحيح

### 6. إضافة مراكز طبية جديدة

```sql
INSERT INTO public.medical_centers (
  name, 
  specialty, 
  address, 
  phone, 
  email, 
  hours, 
  description, 
  serial_number
) VALUES (
  'اسم المركز الجديد',
  'التخصص',
  'العنوان',
  'رقم الهاتف',
  'البريد الإلكتروني',
  'ساعات العمل',
  'وصف المركز',
  'SERIAL_NUMBER'
);
```

### 7. إضافة خدمات جديدة

```sql
INSERT INTO public.services (
  medical_center_id,
  doctor_id,
  name,
  description,
  price,
  duration_minutes
) VALUES (
  'medical_center_id',
  'doctor_id',
  'اسم الخدمة',
  'وصف الخدمة',
  100.00,
  30
);
```

## ملاحظات مهمة

- **تأكد من تشغيل Migration** قبل اختبار الحجز
- **البيانات التجريبية** موجودة في ملف Migration
- **RLS مفعل** - المرضى يرون حجوزاتهم فقط
- **UUIDs** تستخدم كمعرفات أساسية
- **QR Codes** تولد تلقائياً لكل حجز

## الدعم

إذا واجهت أي مشاكل:
1. تحقق من Console في المتصفح
2. تحقق من Supabase Dashboard
3. تأكد من صحة البيانات في قاعدة البيانات
